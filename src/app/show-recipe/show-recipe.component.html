<section class="hero">
    <img src="{{ recipe?.image }}" class="round" alt="{{ recipe?.label }}" />
    <h1>{{ recipe?.label }}</h1>
</section>

<button mat-raised-button color="primary" *ngIf="recipe && userSignedIn" [routerLink]="'/save-recipe/' + getRecipeId(recipe)">Save recipe</button>

<h3>Shopping list</h3>
<mat-list *ngIf="shoppingList">
    <mat-list-item *ngFor="let item of shoppingList; index as i">
        {{ i + 1 + '.' }} {{ item.item }}
    </mat-list-item>
</mat-list>
<mat-form-field appearance="fill" *ngIf="recipe && userSignedIn">
    <mat-label>Add item</mat-label>
    <textarea matInput [(ngModel)]="item"></textarea>
</mat-form-field>
<button mat-raised-button color="primary" (click)="addShoppingListItem()">Add</button>

<h3>Ingredients</h3>
<mat-accordion>
    <mat-expansion-panel *ngFor="let ingredient of recipe?.ingredients">
        <mat-expansion-panel-header>
            <mat-panel-title>
                {{ ingredient.text }}
            </mat-panel-title>
        </mat-expansion-panel-header>
        {{ ingredient.foodCategory | titlecase }}
        <img src="{{ ingredient.image }}" class="round" alt="{{ ingredient.text }}" />
    </mat-expansion-panel>
</mat-accordion>

<h3>Nutrients</h3>
<mat-card>
    <table>
        <thead>
            <tr>
                <th scope="col">Label</th>
            </tr>
        </thead>

        <tbody>
            <tr *ngFor="let data of totalNutrients">
                <td>{{ data.label }}</td>
                <td>{{ data.quantity | number: '1.0-0' }} {{ data.unit }}</td>
            </tr>
        </tbody>
    </table>
</mat-card>